<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHINE DARK - EEG Analysis Algorithms</title>
    <meta name="description" content="EEG data processing algorithms with natural and music-like approaches, featuring 3D visualization and tempo synchronization by SHINE DARK.">
    <meta name="keywords" content="EEG analysis, brain waves, algorithms, music theory, 3D visualization, SHINE DARK">
    <meta name="author" content="Camilo Pineda (Shine Dark)">
    
    <!-- Force refresh and prevent caching -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            color: #fff;
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .main-title {
            font-size: 4rem;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            color: #fff;
        }
        
        .repo-links {
            text-align: center;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .repo-link {
            color: #fff;
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: bold;
            padding: 10px 20px;
            border: 2px solid #fff;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .repo-link:hover {
            background: #fff;
            color: #000;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.4);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .section {
            margin: 40px 0;
            padding: 30px;
            background: #111;
            border-radius: 15px;
            border: 1px solid #333;
        }
        
        .section h2 {
            color: #fff;
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        .section h3 {
            color: #ccc;
            margin: 20px 0 10px 0;
            font-size: 1.5rem;
        }
        
        .algorithm-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .algorithm-box {
            background: #222;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #444;
        }
        
        .algorithm-box h4 {
            color: #4ECDC4;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .code-block {
            background: #000;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4ECDC4;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .chart-container {
            margin: 20px 0;
            height: 300px;
            background: #111;
            border-radius: 10px;
            padding: 20px;
        }
        
        .controls {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .control-group label {
            color: #ccc;
            font-size: 0.9rem;
        }
        
        .control-group input, .control-group select {
            padding: 8px 12px;
            border: 1px solid #555;
            border-radius: 5px;
            background: #222;
            color: #fff;
            font-size: 1rem;
        }
        
        .control-group input[type="range"] {
            width: 200px;
        }
        
        .btn {
            background: #4ECDC4;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #fff;
            transform: translateY(-2px);
        }
        
        .visualization-container {
            height: 400px;
            background: #111;
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        .metrics-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: #222;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #444;
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #4ECDC4;
        }
        
        .metric-label {
            color: #ccc;
            margin-top: 5px;
        }
        
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #fff;
            text-decoration: none;
            padding: 10px 20px;
            border: 2px solid #fff;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.7);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .back-link:hover {
            background: #fff;
            color: #000;
        }
        
        @media (max-width: 768px) {
            .algorithm-container {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .main-title {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Main</a>
    
    <div class="container">
        <h1 class="main-title">SHINE DARK</h1>
        <h2 style="text-align: center; margin-bottom: 20px;">EEG Analysis Algorithms</h2>
        
        <div class="repo-links">
            <a href="https://github.com/shinedark/SD-ALGO" target="_blank" class="repo-link">SD-ALGO Repository</a>
            <a href="https://github.com/shinedark/anti-gravity-sep-6-2025-" target="_blank" class="repo-link">Anti-Gravity Repository</a>
        </div>
        
        <div class="section">
            <h2>üß† EEG Data Processing</h2>
            <p style="color: #ccc; margin-bottom: 20px; line-height: 1.6;">
                Advanced algorithms for processing EEG data with both natural threshold-based analysis and music-like approaches. 
                Features 3D visualization, tempo synchronization, and real-time wave analysis.
            </p>
            
            <div class="controls">
                <div class="control-group">
                    <label for="tempoSlider">Tempo (BPM):</label>
                    <input type="range" id="tempoSlider" min="75" max="303" value="130" step="1">
                    <span id="tempoValue">130 BPM</span>
                </div>
                <div class="control-group">
                    <label for="noteType">Note Type:</label>
                    <select id="noteType">
                        <option value="1/8th">1/8th Note</option>
                        <option value="1/4">1/4 Note</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="algorithmType">Algorithm:</label>
                    <select id="algorithmType">
                        <option value="natural">Natural (Scale 1-9)</option>
                        <option value="music">Music-Like (Scale 1-8)</option>
                    </select>
                </div>
                <button class="btn" onclick="runAnalysis()">Run Analysis</button>
            </div>
        </div>
        
        <div class="section">
            <h2>üìä Real-Time Analysis</h2>
            <div class="metrics-display">
                <div class="metric-card">
                    <div class="metric-value" id="tbrValue">6.99</div>
                    <div class="metric-label">TBR (Theta/Beta Ratio)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="abrValue">2.91</div>
                    <div class="metric-label">ABR (Alpha/Beta Ratio)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="pdrValue">1.45</div>
                    <div class="metric-label">PDR (Power Delta Ratio)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="muValue">8.2</div>
                    <div class="metric-label">Mu Rhythm (Hz)</div>
                </div>
            </div>
            
            <div class="chart-container">
                <canvas id="eegChart"></canvas>
            </div>
        </div>
        
        <div class="section">
            <h2>üéµ 3D EEG Wave Visualization</h2>
            <div class="visualization-container" id="threeContainer"></div>
        </div>
        
        <div class="section">
            <h2>üî¨ Algorithm Details</h2>
            <div class="algorithm-container">
                <div class="algorithm-box">
                    <h4>Natural Algorithm (Scale 1-9)</h4>
                    <p style="color: #ccc; margin-bottom: 15px;">
                        Basic threshold-based analysis using sine wave thresholds. 
                        Multiplies/divides ratios based on threshold crossings for cycle synchronization.
                    </p>
                    <div class="code-block">
def natural_eeg_algo(metrics, steps=16, base=3.0):
    sequence = [metrics[0]]
    thresholds = []
    frequency = 3 / (steps - 1)
    
    for i in range(steps):
        threshold = 4.5 + 4.5 * math.sin(2 * math.pi * frequency * i)
        thresholds.append(threshold)
        
        if i > 0:
            prev = sequence[i-1]
            if prev > threshold:
                next_val = prev / base
            else:
                next_val = prev * base
            sequence.append(next_val)
    
    return sequence, thresholds
                    </div>
                </div>
                
                <div class="algorithm-box">
                    <h4>Music-Like Algorithm (Scale 1-8)</h4>
                    <p style="color: #ccc; margin-bottom: 15px;">
                        Maps EEG metrics to musical notes using triangle wave thresholds. 
                        Includes tempo control and note duration calculations for phasing sync.
                    </p>
                    <div class="code-block">
def music_eeg_algo(metrics, steps=16, tempos=[75, 130, 303]):
    notes = [min(8, max(1, int(m / 0.875))) for m in metrics]
    sequence = [notes[0]]
    thresholds = []
    frequency = 3 / (steps - 1)
    
    for i in range(steps):
        threshold = 4 + 4 * (2 / math.pi) * math.asin(
            math.sin(2 * math.pi * frequency * i))
        thresholds.append(threshold)
        
        if i > 0:
            prev = sequence[i-1]
            if prev > threshold:
                next_val = max(1, prev // 2)
            else:
                next_val = min(8, prev + 1)
            sequence.append(next_val)
    
    return sequence, thresholds
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>‚ö° Key Features</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div>
                    <h3>üßÆ Mathematical Processing</h3>
                    <ul style="color: #ccc; line-height: 1.6;">
                        <li>Sine wave threshold calculations</li>
                        <li>Triangle wave music mapping</li>
                        <li>Ratio-based classification</li>
                        <li>Phasing synchronization < 3.3</li>
                    </ul>
                </div>
                <div>
                    <h3>üéµ Music Theory Integration</h3>
                    <ul style="color: #ccc; line-height: 1.6;">
                        <li>Note mapping (1-8 scale)</li>
                        <li>Tempo control (75-303 BPM)</li>
                        <li>Note duration calculations</li>
                        <li>Harmonic synchronization</li>
                    </ul>
                </div>
                <div>
                    <h3>üé® 3D Visualization</h3>
                    <ul style="color: #ccc; line-height: 1.6;">
                        <li>Real-time EEG wave rendering</li>
                        <li>Interactive 3D cube display</li>
                        <li>Tempo-synchronized animations</li>
                        <li>Dynamic color mapping</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentTempo = 130;
        let currentNoteType = '1/8th';
        let currentAlgorithm = 'natural';
        let eegChart = null;
        let threeScene = null;
        let threeRenderer = null;
        let threeCamera = null;
        let eegWave = null;
        let eegCube = null;
        let animationId = null;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initializeControls();
            initializeChart();
            initializeThreeJS();
            runAnalysis();
        });

        function initializeControls() {
            const tempoSlider = document.getElementById('tempoSlider');
            const tempoValue = document.getElementById('tempoValue');
            const noteType = document.getElementById('noteType');
            const algorithmType = document.getElementById('algorithmType');

            tempoSlider.addEventListener('input', function() {
                currentTempo = parseInt(this.value);
                tempoValue.textContent = currentTempo + ' BPM';
                runAnalysis();
            });

            noteType.addEventListener('change', function() {
                currentNoteType = this.value;
                runAnalysis();
            });

            algorithmType.addEventListener('change', function() {
                currentAlgorithm = this.value;
                runAnalysis();
            });
        }

        function initializeChart() {
            const ctx = document.getElementById('eegChart').getContext('2d');
            eegChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 16}, (_, i) => i + 1),
                    datasets: [{
                        label: 'EEG Sequence',
                        data: [],
                        borderColor: '#4ECDC4',
                        backgroundColor: 'rgba(78, 205, 196, 0.1)',
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Threshold',
                        data: [],
                        borderColor: '#FF6B6B',
                        backgroundColor: 'transparent',
                        fill: false,
                        borderDash: [5, 5]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 10,
                            title: {
                                display: true,
                                text: 'Value'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Step'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'EEG Analysis Results'
                        }
                    }
                }
            });
        }

        function initializeThreeJS() {
            const container = document.getElementById('threeContainer');
            
            // Scene setup
            threeScene = new THREE.Scene();
            threeCamera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            threeRenderer = new THREE.WebGLRenderer({ antialias: true });
            threeRenderer.setSize(container.clientWidth, container.clientHeight);
            threeRenderer.setClearColor(0x000000);
            container.appendChild(threeRenderer.domElement);

            // EEG Wave
            const waveGeometry = new THREE.BufferGeometry();
            const waveMaterial = new THREE.LineBasicMaterial({ color: 0x4ECDC4, linewidth: 3 });
            eegWave = new THREE.Line(waveGeometry, waveMaterial);
            threeScene.add(eegWave);

            // EEG Cube
            const cubeGeometry = new THREE.BoxGeometry(2, 2, 2);
            const cubeMaterial = new THREE.MeshBasicMaterial({ 
                color: 0xFF6B6B,
                wireframe: true
            });
            eegCube = new THREE.Mesh(cubeGeometry, cubeMaterial);
            eegCube.position.set(0, 0, 0);
            threeScene.add(eegCube);

            // Camera position
            threeCamera.position.z = 10;
            threeCamera.position.y = 2;

            // Animation loop
            animate();
        }

        function animate() {
            animationId = requestAnimationFrame(animate);
            
            // Rotate cube
            if (eegCube) {
                eegCube.rotation.x += 0.01;
                eegCube.rotation.y += 0.01;
            }

            // Update wave based on tempo
            updateEEGWave();

            threeRenderer.render(threeScene, threeCamera);
        }

        function updateEEGWave() {
            if (!eegWave) return;

            const positions = new Float32Array(16 * 3);
            const time = Date.now() * 0.001;
            const tempoFactor = currentTempo / 60;

            for (let i = 0; i < 16; i++) {
                const x = (i - 8) * 0.5;
                const y = Math.sin(time * tempoFactor + i * 0.5) * 2;
                const z = Math.cos(time * tempoFactor * 0.5 + i * 0.3) * 1;

                positions[i * 3] = x;
                positions[i * 3 + 1] = y;
                positions[i * 3 + 2] = z;
            }

            eegWave.geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        }

        function runAnalysis() {
            // Simulate EEG metrics from report
            const metrics = [6.99, 2.91, 1.45, 8.2]; // TBR, ABR, PDR, Mu
            
            let sequence, thresholds;
            
            if (currentAlgorithm === 'natural') {
                const result = naturalEEGAlgo(metrics);
                sequence = result.sequence;
                thresholds = result.thresholds;
            } else {
                const result = musicEEGAlgo(metrics);
                sequence = result.sequence;
                thresholds = result.thresholds;
            }

            // Update chart
            eegChart.data.datasets[0].data = sequence;
            eegChart.data.datasets[1].data = thresholds;
            eegChart.update();

            // Update metrics display
            document.getElementById('tbrValue').textContent = sequence[0].toFixed(2);
            document.getElementById('abrValue').textContent = sequence[1].toFixed(2);
            document.getElementById('pdrValue').textContent = sequence[2].toFixed(2);
            document.getElementById('muValue').textContent = sequence[3].toFixed(2);
        }

        function naturalEEGAlgo(metrics, steps = 16, base = 3.0) {
            const sequence = [metrics[0]];
            const thresholds = [];
            const frequency = 3 / (steps - 1);

            for (let i = 0; i < steps; i++) {
                const threshold = 4.5 + 4.5 * Math.sin(2 * Math.PI * frequency * i);
                thresholds.push(threshold);

                if (i > 0) {
                    const prev = sequence[i - 1];
                    const nextVal = prev > threshold ? prev / base : prev * base;
                    sequence.push(nextVal);
                }
            }

            return { sequence, thresholds };
        }

        function musicEEGAlgo(metrics, steps = 16) {
            const notes = metrics.map(m => Math.min(8, Math.max(1, Math.floor(m / 0.875))));
            const sequence = [notes[0]];
            const thresholds = [];
            const frequency = 3 / (steps - 1);

            for (let i = 0; i < steps; i++) {
                const threshold = 4 + 4 * (2 / Math.PI) * Math.asin(Math.sin(2 * Math.PI * frequency * i));
                thresholds.push(threshold);

                if (i > 0) {
                    const prev = sequence[i - 1];
                    const nextVal = prev > threshold ? Math.max(1, Math.floor(prev / 2)) : Math.min(8, prev + 1);
                    sequence.push(nextVal);
                }
            }

            return { sequence, thresholds };
        }

        // Handle window resize
        window.addEventListener('resize', function() {
            if (threeRenderer && threeCamera) {
                const container = document.getElementById('threeContainer');
                threeCamera.aspect = container.clientWidth / container.clientHeight;
                threeCamera.updateProjectionMatrix();
                threeRenderer.setSize(container.clientWidth, container.clientHeight);
            }
        });
    </script>
</body>
</html>
